<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>

<button type=button id="btn">로드</button>
<ul id="showApi">

</ul>
<body>
<script
        src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
        crossorigin="anonymous"></script>
<script>
    // let apiArr = []
    //
    // document.querySelector('#btn').addEventListener('click', () => {
    //     $.getJSON('https://api.odcloud.kr/api/15071595/v1/uddi:262b7fb0-1f5e-40cd-8f14-b0614b4dc997?page=1&perPage=10&serviceKey=Fs0FMSahbQEYkW4qd0bKDnX6ualVgtwD6luFAYuMaOG8c4P%2B%2Bhsjn%2BMh2qNQZoG9AFPrTvZFq%2FJ013lo8dUBWA%3D%3D', function (source){
    //         apiArr = source.data
    //         // console.log(apiArr)
    //         const ulEle = document.querySelector('#showApi')
    //         let str = ''
    //         console.log(apiArr)
    //         // let sortKeys = Object.keys(apiArr).filter(function (sort){return sort.indexOf('구분') >-1 })
    //         // console.log(sortKeys[0])
    //         const value = Object.keys(apiArr)
    //
    //         for (let i = 0; i < apiArr.length; i++) {
    //             str += `<ul>출력확인 : ${apiArr[i].구분}</ul>
    //                     <div>수익률 : ${apiArr[i]["2017년 수익률"]}</div>`
    //         }//end for
    //         ulEle.innerHTML = str
    //     })
    // })

    function loadData(){
        fetch('https://api.odcloud.kr/api/15071595/v1/uddi:262b7fb0-1f5e-40cd-8f14-b0614b4dc997?page=1&perPage=10&serviceKey=Fs0FMSahbQEYkW4qd0bKDnX6ualVgtwD6luFAYuMaOG8c4P%2B%2Bhsjn%2BMh2qNQZoG9AFPrTvZFq%2FJ013lo8dUBWA%3D%3D')
            .then(response => response.json())
            .then(data => {
                const year = data.data // 출력확인
                console.log(year)
                const apiArr = []
                const show = document.querySelector('#showApi')
                for (const i in year) {
                    apiArr.push(year[i].구분)

                }
                show.innerHTML = apiArr
            })
    }
    // loadData()



    function sumMoney(){
        fetch('https://api.odcloud.kr/api/15071595/v1/uddi:262b7fb0-1f5e-40cd-8f14-b0614b4dc997?page=1&perPage=10&serviceKey=Fs0FMSahbQEYkW4qd0bKDnX6ualVgtwD6luFAYuMaOG8c4P%2B%2Bhsjn%2BMh2qNQZoG9AFPrTvZFq%2FJ013lo8dUBWA%3D%3D')
            .then(response => response.json())
            .then(data => {
                const list = []
                const year = data.data // 출력확인
                year.map(m => list.push(m.구분))
                console.log(list)
                console.log(year)
                const perProfit = []
                let result = 0;
                for (const profit of year) {
                 // console.log(profit)
                 perProfit.push(profit)
                 console.log(perProfit)
                 result += (parseFloat(profit["2017년 수익금(단위: 십억원)"]))
                }

            })
        // return result; 여기 ㅓㄶ으면 무한 루프 비슷하게 걸림ㅁ
    }
// sumMoney()

    // const profit = []
    // let total = []
    // fetch('https://api.odcloud.kr/api/15071595/v1/uddi:262b7fb0-1f5e-40cd-8f14-b0614b4dc997?page=1&perPage=10&serviceKey=Fs0FMSahbQEYkW4qd0bKDnX6ualVgtwD6luFAYuMaOG8c4P%2B%2Bhsjn%2BMh2qNQZoG9AFPrTvZFq%2FJ013lo8dUBWA%3D%3D')
    //     .then(response => response.json())
    //     .then(data => {
    //         const year = data.data // 출력확인
    //         year.map(m => profit.push(m["2017년 수익금(단위: 십억원)"]))
    //         profit.splice(0,1)
    //         console.log(profit)
    //         total = profit.split(",")
    //         console.log(total)
    //
    //         })

    // const arr1 = [1,2,3]
    // const arr2 = [2,3,4]
    // const result = []
    // const makeResult = () => {
    //     for (let i = 0; i < profitToNum; i++) {
    //         let preResult = profitToNum[i] * (100 / percentToNum[i])
    //         result.push(preResult)
    //     }
    //     console.log(result)
    // }
    // makeResult()
console.log("-------------------------")
//     const profit = []
//     let profitPercent = []
//     const result = []
//     fetch('https://api.odcloud.kr/api/15071595/v1/uddi:262b7fb0-1f5e-40cd-8f14-b0614b4dc997?page=1&perPage=10&serviceKey=Fs0FMSahbQEYkW4qd0bKDnX6ualVgtwD6luFAYuMaOG8c4P%2B%2Bhsjn%2BMh2qNQZoG9AFPrTvZFq%2FJ013lo8dUBWA%3D%3D')
//         .then(response => response.json())
//         .then(data => {
//             const year = data.data // 출력확인
//             console.log(year)
//             year.map(m => profit.push(m["2017년 수익금(단위: 십억원)"]))
//             year.map(m => profitPercent.push(m["2017년 수익률"]))
//             profit.splice(0, 1)
//             profitPercent.splice(0, 1)
//             const toNumbers = arr => arr.map(Number);
//             const profitToNum = toNumbers(profit)
//             const percentToNum = toNumbers(profitPercent)
//             function makeResult(profitToNum, percentToNum) {
//                 for (let i = 0; i < profitToNum.length; i++) {
//                     let preResult = profitToNum[i] * (100 / percentToNum[i])
//                     result.push(parseInt(preResult))
//                 }
//                 console.log(result)
//             }
//             makeResult(profitToNum, percentToNum)
//         })
//
// console.log(result)
    fetch("Kospi/2017Kospi.json")
        .then(response => response.json())
        .then(data => {
            console.log(data)
            for (let i = 0; i < data.length; i++) {
                const result = data[i]
                console.log(result.종가)
            }
        });

</script>
</body>
</html>